jQuery(document).ready(function(){function showMasc(){canvasMasc.width(canvas.width());canvasMasc.height(canvas.height());loader.css('left',((canvasMasc.width()/2)-(loader.width()/2))+'px');loader.css('top',((canvasMasc.height()/2)-(loader.height()/2))+10+'px');canvasMasc.show();loader.show();}
var canvas=jQuery(jQuery('div.canvas')[0]),canvasMasc=jQuery(jQuery('div.canvas_masc')[0]),loader=jQuery(jQuery('div.loader')[0]),categorySpecificSearchFields=jQuery(jQuery('td#category_specific_search_fields')[0]),selectCateory=jQuery(jQuery('select#search_category')[0]),submitForm=jQuery(jQuery('input[type=submit][name=submit_search_form]')[0]),form=jQuery(jQuery('form[name=search]')[0]);submitForm.click(function(evn){evn.preventDefault();showMasc();form.submit();});selectCateory.change(function(){showMasc();var id_cat=jQuery(this).val();categorySpecificSearchFields.load(BASE_URL+'/search_LoadSpecificSearchFields.php?search_category='+id_cat,{},function(response,status,object){NFFix();loader.hide();canvasMasc.hide();});});var jDoc=jQuery(this),jSearchContainer=jDoc.find('div#search_form_container'),oSuggest=new Suggest(jDoc.find('input#key_words')[0],jSearchContainer),jSearchForm=jSearchContainer.find('form#search_form'),jCategoryField=jQuery(jSearchContainer.find('div.category_field')).click(function(event){jCategoryList.changeVisibility();oSuggest.hideSuggestResult();event.stopPropagation();}),jCategoryList=jQuery(jCategoryField.find('ul.category_list')),jCategory=jQuery(jCategoryList.find('li')).click(function(){var jThis=jQuery(this);jSelectedCategory.text(jThis.text());jSelectedCategoryField.val(jThis.attr('value'));jCategory.removeClass('selected');jThis.addClass('selected');}),jSelectedCategory=jQuery(jCategoryField.find('span.selected_category')),jSelectedCategoryField=jQuery(jSearchContainer.find('input[type=hidden][name=search_category]'));jCategoryList.changeVisibility=function(){if(jQuery(this).attr('visible')==='false'){jCategoryList.changeVisibilityToVisible();jDoc.find('body').bind('click.hideSearchCategoryField',function(){jDoc.find('body').unbind('click.hideSearchCategoryField');jCategoryList.changeVisibilityToNotVisible();});}else jCategoryList.changeVisibilityToNotVisible();}
jCategoryList.changeVisibilityToVisible=function(){var jThis=jQuery(this);jThis.attr('visible','true');jThis.addClass('visible');jCategoryField.addClass('no_bottom_border_radius');jCategoryField.addClass('select');}
jCategoryList.changeVisibilityToNotVisible=function(){var jThis=jQuery(this);jThis.attr('visible','false');jThis.removeClass('visible');jCategoryField.removeClass('no_bottom_border_radius');jCategoryField.removeClass('select');jDoc.find('body').unbind('click.hideSearchCategoryField');}});